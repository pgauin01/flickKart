(this.webpackJsonpmern_ecomm=this.webpackJsonpmern_ecomm||[]).push([[4],{80:function(e,a,t){"use strict";t.d(a,"a",(function(){return m})),t.d(a,"c",(function(){return u})),t.d(a,"d",(function(){return o})),t.d(a,"b",(function(){return d}));var r=t(2),n=t.n(r),s=t(4),c=t(1),l=t(7),i=t.n(l),m=function(e,a){return function(){var t=Object(s.a)(n.a.mark((function t(r,s){var c,l,m,u;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=s().user.credentials.id,l=s().products.product.id,m={review:a,rating:e,product:l,user:c},t.prev=3,t.next=6,i.a.post("/reviews",m);case 6:u=t.sent,console.log(u),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0.response);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,a){return t.apply(this,arguments)}}()},u=function(){return function(){var e=Object(s.a)(n.a.mark((function e(a,t){var r,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:c.n}),r=t().user.credentials.id,e.next=5,i.a.get("reviews/".concat(r));case 5:s=e.sent,a({type:c.h,payload:s.data.data.data}),a({type:c.u}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(a,t){return e.apply(this,arguments)}}()},o=function(e,a){return function(){var t=Object(s.a)(n.a.mark((function t(r){var s;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.patch("/reviews/".concat(e),a);case 3:s=t.sent,r({type:c.y,payload:s.data.data.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.response);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var a=Object(s.a)(n.a.mark((function a(t){var r;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,i.a.delete("/reviews/".concat(e));case 3:r=a.sent,t({type:c.e,payload:e}),console.log(r),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0.response);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}},83:function(e,a,t){"use strict";t.r(a);var r=t(15),n=t(0),s=t.n(n),c=t(9),l=t(5),i=t(17),m=function(e){var a=Object(l.b)(),t=Object(l.c)((function(e){return e.user})).credentials.address.find((function(a){return a.id===e.id})),c=Object(n.useState)(t.address),m=Object(r.a)(c,2),u=m[0],o=m[1],d=function(e){e.preventDefault(),a(Object(i.h)(t.id,{address:u}))};return s.a.createElement("div",{className:"userViewAddress__edit"},s.a.createElement("h1",{className:"u-margin-horizontal-medium"},"Edit Address"),s.a.createElement("form",{onSubmit:d},s.a.createElement("input",{type:"text",name:"address",id:"address",className:"userViewAddress__input",value:u,onChange:function(e){return a=e.target.value,void o(a);var a}}),s.a.createElement("div",{className:"userViewAddress__actions u-margin-top-medium"},s.a.createElement("button",{className:"btn btn--cart--1",onClick:d},"Submit"),s.a.createElement("button",{className:"btn btn--cart--2 u-margin-left-3",onClick:function(){e.history.goBack()}},"cancel"))))},u=function(e){var a=Object(l.b)(),t=Object(l.c)((function(e){return e.user.credentials.id})),m=Object(n.useState)(""),u=Object(r.a)(m,2),o=u[0],d=u[1],p=function(e){e.preventDefault(),a(Object(i.b)({address:o,user:t}))};return s.a.createElement("div",{className:"userViewAddress__edit"},s.a.createElement("h1",{className:"u-margin-horizontal-medium"},"Add Address"),s.a.createElement("form",{onSubmit:p},s.a.createElement("input",{type:"text",name:"address",id:"address",className:"userViewAddress__input",value:o,onChange:function(e){return a=e.target.value,void d(a);var a}}),s.a.createElement("div",{className:"userViewAddress__actions u-margin-top-medium"},s.a.createElement("button",{className:"btn btn--cart--1",onClick:p},"Submit"),s.a.createElement(c.b,{to:"/user"},s.a.createElement("button",{className:"btn btn--cart--2 u-margin-left-3"},"cancel")))))},o=function(e){var a,t=Object(n.useState)(!1),c=Object(r.a)(t,2),o=c[0],d=c[1],p=Object(n.useState)(!1),f=Object(r.a)(p,2),b=f[0],v=f[1],_=Object(n.useState)(),g=Object(r.a)(_,2),E=g[0],w=g[1],N=Object(l.b)(),h=Object(l.c)((function(e){return e.user})).credentials.address;return a=0===h.length?s.a.createElement("div",{className:"add"},s.a.createElement("p",null,"No address found")):s.a.createElement("div",{className:"userViewAddress__address"},h.map((function(e){return s.a.createElement("div",{key:e.id,className:"userViewAddress__address--block"},s.a.createElement("div",{className:"userViewAddress__header"},s.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){return function(e){d(!0),w(e)}(e.id)}},s.a.createElement("img",{src:"/img/edit.png",className:"userViewAddress__img"})),s.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){return function(e){N(Object(i.c)(e))}(e.id)}},s.a.createElement("img",{src:"/img/delete.png",className:"userViewAddress__img"}))),s.a.createElement("h3",{className:"u-margin-horizontal-small"},e.user.name),s.a.createElement("p",{className:"u-margin-horizontal-small"}," ",e.address))}))),o&&(a=s.a.createElement(m,Object.assign({id:E},e))),b&&(a=s.a.createElement(u,null)),s.a.createElement("div",{className:"userViewAddress"},b?null:s.a.createElement("button",{className:"btn btn__address",onClick:function(){v(!0)}},"Add New Address"),a)},d=t(2),p=t.n(d),f=t(4),b=t(16),v=t(3),_=function(e,a){return"FORM_INPUT_UPDATE"===a.type?{inputValues:Object(v.a)(Object(v.a)({},e.inputValues),{},Object(b.a)({},a.input,a.value))}:e},g=function(e,a){return"FORM_ERROR"===a.type?{errorValues:Object(v.a)(Object(v.a)({},e.errorValues),{},Object(b.a)({},a.name,a.message))}:"FORM_CLEAR"===a.type?{errorValues:Object(v.a)(Object(v.a)({},e.errorValues),{},{name:"",email:"",password:"",passwordConfirm:""})}:e},E=function(e){var a=Object(l.c)((function(e){return e.user.credentials})),t=Object(l.c)((function(e){return e.ui.error})),c=a.email,m=(a._id,a.name),u=a.photo,o=("/img/users/".concat(u),Object(l.b)()),d=Object(n.useReducer)(_,{inputValues:{name:m||"",email:c||"",passwordCurrent:"",password:"",passwordConfirm:""}}),b=Object(r.a)(d,2),v=b[0],E=b[1],w=Object(n.useReducer)(g,{errorValues:{name:"",email:"",password:"",passwordConfirm:""}}),N=Object(r.a)(w,2),h=N[0],O=N[1];Object(n.useEffect)((function(){if(t){for(var e in t.errors)O({type:"FORM_ERROR",name:e,message:t.errors[e].message});"your current password is wrong"===t.message&&O({type:"FORM_ERROR",name:"password",message:t.message})}}),[t]);var j=Object(n.useCallback)((function(e,a){E({type:"FORM_INPUT_UPDATE",value:e,input:a})}),[E]),y=function(){var e=Object(f.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),o(Object(i.f)(v.inputValues)),e.next=4,O({type:"FORM_CLEAR"});case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),C=function(){var e=Object(f.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),o(Object(i.g)(v.inputValues)),e.next=4,O({type:"FORM_CLEAR"});case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:"userview__content"},s.a.createElement("div",{className:"userview__form-container"},s.a.createElement("h1",{style:{letterSpacing:"1px"},className:"u-margin-bottom-medium u-margin-left-2 heading-color"},"Your Account Settings"),s.a.createElement("form",{className:"form",onSubmit:y},s.a.createElement("div",{className:"form__group"},s.a.createElement("label",{className:"form__label--bold u-margin-bottom-small u-margin-left-3",htmlFor:"name"},"Name"),s.a.createElement("input",{type:"text",name:"name",placeholder:"Name",className:"form__input",id:"name",value:v.inputValues.name,onChange:function(e){return j(e.target.value,e.target.name)},required:!0}),h.errorValues.name?s.a.createElement("p",{className:"form__validText"},h.errorValues.name):null),s.a.createElement("div",{className:"form__group"},s.a.createElement("label",{className:"form__label--bold u-margin-bottom-small u-margin-left-3",htmlFor:"email"},"Email address"),s.a.createElement("input",{type:"email",name:"email",placeholder:"Email address",className:"form__input",id:"email",value:v.inputValues.email,onChange:function(e){return j(e.target.value,e.target.name)},required:!0}),h.errorValues.email?s.a.createElement("p",{className:"form__validText"},h.errorValues.email):null),s.a.createElement("div",{className:"form__group right"},s.a.createElement("button",{className:"btn btn--red"},"Save Settings"))),s.a.createElement("hr",{className:"u-margin-top-medium u-margin-bottom-medium"}),s.a.createElement("div",{className:"userview__form-container"},s.a.createElement("h1",{style:{letterSpacing:"1px"},className:"u-margin-bottom-medium u-margin-left-2 heading-color"},"Password Change"),s.a.createElement("form",{onSubmit:C},s.a.createElement("div",{className:"form__group"},s.a.createElement("label",{className:"form__label--bold u-margin-bottom-small u-margin-left-2",htmlFor:"email"},"Current Password"),s.a.createElement("input",{type:"password",name:"passwordCurrent",placeholder:"*********",className:"form__input",id:"passwordCurrent",value:v.inputValues.passwordCurrent,onChange:function(e){return j(e.target.value,e.target.name)},required:!0}),h.errorValues.password?s.a.createElement("p",{className:"form__validText"},h.errorValues.password):null),s.a.createElement("div",{className:"form__group"},s.a.createElement("label",{className:"form__label--bold u-margin-bottom-small u-margin-left-2",htmlFor:"email"},"New Password"),s.a.createElement("input",{type:"password",name:"password",placeholder:"*********",className:"form__input",id:"password",value:v.inputValues.password,onChange:function(e){return j(e.target.value,e.target.name)},required:!0})),s.a.createElement("div",{className:"form__group"},s.a.createElement("label",{className:"form__label--bold u-margin-bottom-small u-margin-left-2",htmlFor:"email"},"Confirm Password"),s.a.createElement("input",{type:"password",name:"passwordConfirm",placeholder:"*********",className:"form__input",id:"passwordConfirm",value:v.inputValues.passwordConfirm,onChange:function(e){return j(e.target.value,e.target.name)},required:!0}),h.errorValues.passwordConfirm?s.a.createElement("p",{className:"form__validText"},h.errorValues.passwordConfirm):null),s.a.createElement("div",{className:"form__group right"},s.a.createElement("button",{className:"btn btn--red"},"Update Password"))))))},w=t(80),N=function(e){var a=Object(l.b)(),t=(Object(l.c)((function(e){return e.user})),Object(n.useState)(e.data.rating)),c=Object(r.a)(t,2),i=c[0],m=c[1],u=Object(n.useState)(e.data.review),o=Object(r.a)(u,2),d=o[0],b=o[1],v=function(e){"Rating"===e.name?m(e.value):"Review"===e.name&&b(e.value)},_=function(){var t=Object(f.a)(p.a.mark((function t(r){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),n={review:d,rating:i},a(Object(w.d)(e.data._id,n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return s.a.createElement("div",{className:"userViewAddress__edit"},s.a.createElement("h1",{className:"u-margin-horizontal-medium"},"Edit Review"),s.a.createElement("form",{onSubmit:_},s.a.createElement("div",{className:"form__group"},s.a.createElement("label",{htmlFor:"Rating",className:"form__label form__label--center"},"Rating"),s.a.createElement("input",{type:"number",max:"5",min:"1",name:"Rating",id:"Rating",className:"form__input",value:i,onChange:function(e){return v(e.target)}})),s.a.createElement("div",{className:"form__group"},s.a.createElement("label",{htmlFor:"Review",className:"form__label form__label--center"},"Review"),s.a.createElement("input",{type:"text",name:"Review",id:"Review",className:"form__input",value:d,onChange:function(e){return v(e.target)}})),s.a.createElement("div",{className:"userViewAddress__actions u-margin-top-medium"},s.a.createElement("button",{className:"btn btn--cart--1",onClick:_},"Submit"),s.a.createElement("button",{className:"btn btn--cart--2 u-margin-left-3",onClick:function(){e.history.goBack()}},"cancel"))))},h=function(e){var a=Object(n.useState)(!1),t=Object(r.a)(a,2),c=t[0],i=t[1],m=Object(n.useState)({}),u=Object(r.a)(m,2),o=u[0],d=u[1],b=Object(l.b)(),v=Object(l.c)((function(e){return e.reviews})),_=Object(l.c)((function(e){return e.ui.loading}));Object(n.useEffect)((function(){b(Object(w.c)())}),[b]);var g,E=function(){var e=Object(f.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(Object(w.b)(a));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return g=_?s.a.createElement("img",{src:"/loading.gif"}):0===v.reviews.length?s.a.createElement("div",{className:"review"},s.a.createElement("p",null,"No review added..")):v.reviews.map((function(e){return s.a.createElement("div",{key:e.id,className:"reviewScreen__block"},s.a.createElement("div",{className:"reviewScreen__header"},s.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){return a=e,i(!0),void d(a);var a}},s.a.createElement("img",{src:"/img/edit.png",className:"reviewScreen__img"})),s.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){return E(e.id)}},s.a.createElement("img",{src:"/img/delete.png",className:"reviewScreen__img"}))),s.a.createElement("div",{className:"reviewScreen__description"},s.a.createElement("h3",{className:"u-margin-horizontal-small"},e.product.name),s.a.createElement("h3",{className:"u-margin-horizontal-small"},e.rating,"*"),s.a.createElement("p",{className:"u-margin-horizontal-small"}," ",e.review)))})),c&&(g=s.a.createElement(N,{data:o})),s.a.createElement("div",{className:"reviewScreen"},c?null:s.a.createElement("h1",{className:"heading-secondary u-margin-bottom-small"},"My Reviews"),s.a.createElement("div",{className:"reviewScreen__container"},g))};a.default=function(e){var a=s.a.createElement(E,null),t=s.a.createElement(o,e),l=s.a.createElement(h,e),i=Object(n.useState)(a),m=Object(r.a)(i,2),u=m[0],d=m[1],p=function(e){d(e)};return s.a.createElement("section",{className:"section-user"},s.a.createElement("main",{className:"userview"},s.a.createElement("div",{className:"userview__menu"},s.a.createElement("ul",{className:"sidenav__list"},s.a.createElement("li",{className:"sidenav__item",onClick:function(){return p(a)}},"My Settings"),s.a.createElement(c.b,{to:"/user/wishlist"},s.a.createElement("li",{className:"sidenav__item"},"Wishlist")),s.a.createElement(c.b,{to:"/user/orders"},s.a.createElement("li",{className:"sidenav__item"},"Orders")),s.a.createElement(c.b,{to:"/user/cart"},s.a.createElement("li",{className:"sidenav__item"},"Cart")),s.a.createElement("li",{className:"sidenav__item",onClick:function(){return p(l)}},"My Reviews"),s.a.createElement("li",{className:"sidenav__item",onClick:function(){return p(t)}},"My Address"))),u))}}}]);
//# sourceMappingURL=4.20bf5ab3.chunk.js.map