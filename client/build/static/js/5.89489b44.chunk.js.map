{"version":3,"sources":["components/UI/quantityInput.js","../node_modules/@stripe/stripe-js/dist/stripe.esm.js","pages/cart.js"],"names":["Input","props","useState","value","quantity","SetIsQuantity","dispatch","useDispatch","quantityUpdateHandler","e","a","preventDefault","updateQuantity","cartId","onSubmit","className","htmlFor","type","id","onChange","quantityChangeHandler","target","V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","stripePromise","loadScript","params","Promise","resolve","reject","window","Stripe","console","warn","script","scripts","document","querySelectorAll","concat","i","length","test","src","findScript","queryString","advancedFraudSignals","createElement","headOrBody","head","body","Error","appendChild","injectScript","addEventListener","error","initStripe","maybeStripe","args","startTime","stripe","apply","undefined","_registerWrapper","name","version","registerWrapper","stripePromise$1","then","loadCalled","err","loadStripe","_len","arguments","Array","_key","Date","now","Cart","cartt","useSelector","state","cart","loading","userID","user","credentials","email","total","getCartData","useCallback","getCart","getTotal","calcTotal","addTowish","userData","addToWishlist","deleteCartData","deleteCart","useEffect","makePayment","axios","get","session","redirectToCheckout","sessionId","data","log","map","key","img","seller","price","onClick","pid","cartid","product","addWishHandler"],"mappings":"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","file":"static/js/5.89489b44.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { updateQuantity } from \"../../store/actions/cart\";\r\n\r\nconst Input = (props) => {\r\n  const [quantity, SetIsQuantity] = useState(props.value);\r\n  const dispatch = useDispatch();\r\n  //   console.log(quantity);\r\n  const quantityChangeHandler = (e) => {\r\n    SetIsQuantity(e);\r\n  };\r\n\r\n  const quantityUpdateHandler = async (e) => {\r\n    e.preventDefault();\r\n    await dispatch(updateQuantity(props.cartId, quantity));\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={quantityUpdateHandler}>\r\n      <div className=\"form-group\">\r\n        <label htmlFor=\"cart\" className=\"cart__input--label\">\r\n          Qty:\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"cart\"\r\n          className=\"cart__input\"\r\n          value={quantity}\r\n          onChange={(e) => quantityChangeHandler(e.target.value)}\r\n        />\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Input;\r\n","var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"1.9.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      }\n\n      script.addEventListener('load', function () {\n        if (window.Stripe) {\n          resolve(window.Stripe);\n        } else {\n          reject(new Error('Stripe.js not available'));\n        }\n      });\n      script.addEventListener('error', function () {\n        reject(new Error('Failed to load Stripe.js'));\n      });\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  });\n  return stripePromise;\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n};\n\n// own script injection.\n\nvar stripePromise$1 = Promise.resolve().then(function () {\n  return loadScript(null);\n});\nvar loadCalled = false;\nstripePromise$1[\"catch\"](function (err) {\n  if (!loadCalled) {\n    console.warn(err);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now();\n  return stripePromise$1.then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","import React, { useEffect, useCallback } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getCart, calcTotal, deleteCart } from \"../store/actions/cart\";\r\nimport { addToWishlist } from \"../store/actions/wishlist\";\r\nimport Input from \"../components/UI/quantityInput\";\r\nimport axios from \"axios\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\n\r\nconst Cart = (props) => {\r\n  const dispatch = useDispatch();\r\n  const cartt = useSelector((state) => state.cart);\r\n  const loading = useSelector((state) => state.cart.loading);\r\n  const email = useSelector((state) => state.user.credentials.email);\r\n  const userID = useSelector((state) => state.user.credentials.id);\r\n  const { total } = cartt;\r\n  // console.log(loading);\r\n  // console.log(cartt);\r\n\r\n  const getCartData = useCallback(async () => {\r\n    await dispatch(getCart());\r\n  });\r\n\r\n  const getTotal = useCallback(async () => {\r\n    await dispatch(calcTotal());\r\n  });\r\n\r\n  const addTowish = useCallback(async (userData) => {\r\n    await dispatch(addToWishlist(userData));\r\n  });\r\n\r\n  const deleteCartData = useCallback(async (id) => {\r\n    await dispatch(deleteCart(id));\r\n  });\r\n\r\n  useEffect(() => {\r\n    getCartData();\r\n    getTotal();\r\n  }, [dispatch]);\r\n\r\n  const deleteCartHandler = (pid) => {\r\n    deleteCartData(pid);\r\n\r\n    // getTotal();\r\n  };\r\n\r\n  const addWishHandler = (cartid, pid) => {\r\n    const product = pid;\r\n    const user = userID;\r\n    deleteCartData(cartid);\r\n    addTowish({ product, user });\r\n  };\r\n\r\n  const makePayment = async () => {\r\n    try {\r\n      const session = await axios.get(`/bookings/checkout-session/${userID}`);\r\n      const stripePromise = loadStripe(\r\n        \"pk_test_51H7e0FFoce81BebJOGLt0D7U5RtX6LOT9zLqFi80EiNSmZFMoeZKUeuwI89UzkIxEeulrwZlOEYxvXxr3Wg5XISJ003LCntMly\"\r\n      );\r\n      // console.log(session.data.session.id);\r\n\r\n      const stripe = await stripePromise;\r\n      await stripe.redirectToCheckout({\r\n        sessionId: session.data.session.id,\r\n      });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  let cart;\r\n  if (loading) {\r\n    cart = (\r\n      <div className=\"loading\">\r\n        <img src=\"/loading.gif\" />\r\n      </div>\r\n    );\r\n  } else if (cartt.cart.length === 0) {\r\n    cart = (\r\n      <div className=\"noItem\">\r\n        <p className=\"noItem__text\">\r\n          No products found in cart start adding some....\r\n        </p>\r\n      </div>\r\n    );\r\n  } else {\r\n    cart = (\r\n      <>\r\n        <div className=\"cart\">\r\n          {cartt.cart.map((cart) => {\r\n            return (\r\n              <div key={cart.cartId} className=\"cart__card\">\r\n                <img src={cart.img} className=\"cart__img\" />\r\n                <div className=\"cart__description\">\r\n                  <h2 className=\"heading-tertiary\">{cart.name}</h2>\r\n                  <h2 className=\"heading-tertiary\">{cart.seller}</h2>\r\n                  <h2 className=\"heading-tertiary\">₹‎{cart.price}</h2>\r\n                </div>\r\n                <div className=\"cart__actions\">\r\n                  <Input cartId={cart.cartId} value={cart.quantity} />\r\n                  <button\r\n                    className=\"btn btn--cart--delete\"\r\n                    onClick={() => deleteCartHandler(cart.cartId)}\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                  <button\r\n                    className=\"btn btn--cart--later\"\r\n                    onClick={() => addWishHandler(cart.cartId, cart.id)}\r\n                  >\r\n                    Buy later\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        <div className=\"cartright\">\r\n          <h3 className=\"heading-tertiary u-margin-bottom-small\">\r\n            PRICE DETAILS\r\n          </h3>\r\n          <hr />\r\n          <ul className=\"cartright__desc\">\r\n            <li className=\"cartright__items\">Price {cartt.cart.length} item</li>\r\n            <li className=\"cartright__items\">₹{total}</li>\r\n            <li className=\"cartright__items\">Delivery Charges</li>\r\n            <li className=\"cartright__items\">Free</li>\r\n          </ul>\r\n          <hr />\r\n          <div className=\"cartright__amount\">\r\n            <h2>Total Amount</h2>\r\n            <h2>₹{total}</h2>\r\n            <div className=\"right\">\r\n              <button className=\"btn btn__order\" onClick={makePayment}>\r\n                Place Order\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return <section className=\"section-cart\">{cart}</section>;\r\n};\r\n\r\nexport default Cart;\r\n"],"sourceRoot":""}